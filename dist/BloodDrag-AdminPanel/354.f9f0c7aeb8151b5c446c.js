"use strict";(self.webpackChunkblood_drag_admin_panel=self.webpackChunkblood_drag_admin_panel||[]).push([[354],{7288:(b,A,d)=>{d.d(A,{a:()=>T});var u=d(5938),a=d(7716);let T=(()=>{class c{constructor(t,Z){this.data=t,this.dialogRef=Z}ngOnInit(){}closeDialog(){this.dialogRef.close(!1)}}return c.\u0275fac=function(t){return new(t||c)(a.Y36(u.WI),a.Y36(u.so))},c.\u0275cmp=a.Xpm({type:c,selectors:[["app-delete-confirm-dialog"]],decls:10,vars:3,consts:[[1,"container"],[1,"row","position-relative"],[1,"h6","text-center"],[1,"text-center"],[1,"btn","btn-sm","custom-blue",3,"mat-dialog-close"],[1,"btn","btn-sm","custom-red","ml-2",3,"mat-dialog-close"]],template:function(t,Z){1&t&&(a.TgZ(0,"div",0),a._UZ(1,"div",1),a.TgZ(2,"mat-dialog-content"),a.TgZ(3,"p",2),a._uU(4),a.qZA(),a.qZA(),a.TgZ(5,"div",3),a.TgZ(6,"button",4),a._uU(7,"NO"),a.qZA(),a.TgZ(8,"button",5),a._uU(9,"YES"),a.qZA(),a.qZA(),a.qZA()),2&t&&(a.xp6(4),a.Oqu(Z.data.message),a.xp6(2),a.Q6J("mat-dialog-close",!1),a.xp6(2),a.Q6J("mat-dialog-close",!0))},directives:[u.xY,u.ZT],styles:[".close-btn[_ngcontent-%COMP%]{position:absolute;right:0;top:0;cursor:pointer}.custom-blue[_ngcontent-%COMP%]{background-color:#00f;color:#fff}.custom-red[_ngcontent-%COMP%]{background-color:red;color:#fff}"]}),c})()},5566:(b,A,d)=>{d.d(A,{a:()=>c});var u=d(7716),a=d(7179),T=d(5643);let c=(()=>{class l{constructor(Z,h){this.router=Z,this.authService=h}canActivate(Z,h){return!!this.authService.authValue||(this.router.navigate(["/login"],{queryParams:{returnUrl:h.url}}),!1)}}return l.\u0275fac=function(Z){return new(Z||l)(u.LFG(a.F0),u.LFG(T.e))},l.\u0275prov=u.Yz7({token:l,factory:l.\u0275fac,providedIn:"root"}),l})()},2354:(b,A,d)=>{d.r(A),d.d(A,{OrderManagementModule:()=>H});var u=d(8583),a=d(7179),T=d(5566),c=d(3679),l=d(2340),t=d(7716),Z=d(4235),h=d(8313),_=d(4853);function O(r,n){if(1&r&&(t.TgZ(0,"option",27),t._uU(1),t.qZA()),2&r){const e=n.$implicit;t.Q6J("value",e.id),t.xp6(1),t.Oqu(null==e?null:e.name)}}function C(r,n){if(1&r&&(t.TgZ(0,"option",27),t._uU(1),t.qZA()),2&r){const e=n.$implicit;t.Q6J("value",e.id),t.xp6(1),t.AsE("",null==e?null:e.firstName," ",null==e?null:e.lastName,"")}}function x(r,n){if(1&r){const e=t.EpF();t.TgZ(0,"div",28),t.TgZ(1,"label"),t._uU(2),t.ALo(3,"currency"),t.qZA(),t._UZ(4,"br"),t.TgZ(5,"button",29),t.NdJ("click",function(){const s=t.CHM(e).$implicit;return t.oxw().substractTicket(s)}),t._UZ(6,"i",30),t.qZA(),t._uU(7,"\xa0 "),t.TgZ(8,"button",31),t._uU(9),t.qZA(),t._uU(10,"\xa0 "),t.TgZ(11,"button",32),t.NdJ("click",function(){const s=t.CHM(e).$implicit;return t.oxw().addTicket(s)}),t._UZ(12,"i",33),t.qZA(),t._uU(13,"\xa0 "),t.qZA()}if(2&r){const e=n.$implicit,i=t.oxw();t.xp6(2),t.lnq("",e.ticketTypeName," \xa0 (",t.xi3(3,4,e.price,"USD")," + Tax(",e.tax,"%))"),t.xp6(7),t.Oqu(i.ticketCount&&i.ticketCount[e.ticketTypeId]?i.ticketCount[e.ticketTypeId]:0)}}const U=function(r){return{"is-invalid":r}};let y=(()=>{class r{constructor(e,i,o,s){this.mmSrvc=e,this.tmSrvc=i,this.fb=o,this.alertSrvc=s,this.tillDate="",this.onlyNumberRegex=/^\d+$/,this.ticketTypeList=[],this.eventList=[],this.allMemberList=[],this.eventTickets=[],this.ticketQuantity=0,this.expandData="",this.subTotalPrice=0,this.totalPrice=0,this.taxPrice=0,this.payLoad=[]}ngOnInit(){this.getAllEvents(),this.createTicketForm=this.fb.group({eventId:["",c.kI.required],member:["",c.kI.required]}),this.getTicketTypeList(),this.getAllUsers()}getAllUsers(){this.mmSrvc.getAllMemberList().subscribe(e=>{e.error||(this.allMemberList=e.data,console.log(this.allMemberList))})}submitForm(e){this.createTicketForm.invalid||(this.payLoad=this.payLoad.map(i=>{var o;return Object.assign(Object.assign({},i),{userId:null===(o=this.createTicketForm.get("member"))||void 0===o?void 0:o.value})}),this.tmSrvc.addToCart(this.payLoad).subscribe(i=>{var o;const s=i.data,g=[];for(let p of s)g.push({cartId:p._id,quantity:p.noOfTickets});const m={items:g,payMode:"cash",userId:null===(o=this.createTicketForm.get("member"))||void 0===o?void 0:o.value,transactionId:"12345"};this.tmSrvc.purchaseTicket(m).subscribe(p=>{p.error||($(window).scrollTop(0),e.resetForm(),this.alertSrvc.success("Ticket added successfully."))})}))}createTicket(e){tinymce.triggerSave();let i=JSON.parse(JSON.stringify(this.createTicketForm.value));i.availableNumberOfTickets=i.totalNumberOfTickets,this.tmSrvc.createTicket(i).subscribe(o=>{o.error||($(window).scrollTop(0),e.resetForm(),setTimeout(()=>{tinymce.get(0).setContent("")},50),this.alertSrvc.success("Ticket added successfully."))})}addTicket(e){const i=e.ticketTypeId,o=e.ticketId;this.ticketCount||(this.ticketCount={}),this.ticketCount[i]||(this.ticketCount[i]=0),this.ticketCount[i]=1*this.ticketCount[i]+1,this.ticketQuantity=1*this.ticketQuantity+1,this.ticketCart||(this.ticketCart={}),this.ticketCart&&!this.ticketCart[i]&&(this.ticketCart[i]=[]),this.ticketCart[i].push({eventId:this.selectedEvent,ticketTypeId:i,ticketId:o,price:parseFloat(e.price).toFixed(2),tax:parseFloat(e.tax).toFixed(2)}),console.log(this.ticketCart),this.calculatePrice()}substractTicket(e){const i=e.ticketTypeId;this.ticketCount&&this.ticketCount[i]&&this.ticketCount[i]>0&&(this.ticketCount[i]=1*this.ticketCount[i]-1,this.ticketQuantity=1*this.ticketQuantity-1),this.ticketCart[i].splice(this.ticketCart[i].length-1,1),this.ticketCount[i]||delete this.ticketCount[i],this.calculatePrice()}calculatePrice(){this.payLoad=[];const e=Object.keys(this.ticketCart);this.totalPrice=0,this.taxPrice=0,this.subTotalPrice=0;for(let i of e){let o=0;const s=this.ticketCart[i][0];console.log(s);const g=this.ticketCart[i].length;let p,m=s.price*g*1;this.subTotalPrice=1*m+1*this.subTotalPrice,p=m*s.tax*1/100,p=parseFloat(p.toString()).toFixed(2),this.taxPrice=1*p+this.taxPrice,o=1*o+1*m+1*p,this.totalPrice=1*this.totalPrice+1*o,this.payLoad.push({eventId:s.eventId,totalPrice:o,tax:s.tax,subTotalPrice:m,perTicketPrice:s.price,noOfTickets:g,ticketId:s.ticketId,ticketTypeId:s.ticketTypeId,transactionId:null})}}ticketSelection(e,i,o){this.ticketCart||(this.ticketCart={}),this.ticketCart&&!this.ticketCart[i]&&(this.ticketCart[i]=[]),this.ticketCart[i].push({eventId:i,ticketTypeId:e,ticketId:o})}getAllEvents(){this.tmSrvc.getEventList().subscribe(e=>{e.error||(this.eventList=e.data)})}getTicketTypeList(){this.tmSrvc.getTicketTypeList().subscribe(e=>{e.error||(this.ticketTypeList=e.data,console.log(this.ticketTypeList))})}getEventData(e){console.log(e.target.value),e.target.value.length>0&&(this.selectedEvent=e.target.value,this.tmSrvc.getEventTickets({eventId:e.target.value}).subscribe(i=>{this.eventTickets=i.data,this.tickets||(this.tickets={}),this.tickets[e.target.value]={},this.tickets[e.target.value]=i.data,console.log(this.tickets)}))}getSelectedEvent(){return this.createTicketForm.value.eventId?this.eventList.filter(e=>e.id==this.createTicketForm.value.eventId)[0]:""}setMaxDateTicket(){if(this.createTicketForm.value.eventId){let e=this.eventList.filter(i=>i.id==this.createTicketForm.value.eventId)[0];$(".js-datepicker1").datepicker("setEndDate",new Date(e.startDate))}}ngAfterViewInit(){$(".js-datepicker1").datepicker({startDate:new Date}),$(".js-datepicker1").change(()=>{this.createTicketForm.controls.tillDate.setValue($(".js-datepicker1").val())}),tinymce.init({selector:"#desc",height:300,setup:e=>{e.on("change",i=>{this.createTicketForm.controls.shortDescription.setValue(e.getContent())})},plugins:"print preview paste importcss searchreplace autolink autosave save directionality code visualblocks visualchars fullscreen image link media template codesample table charmap hr pagebreak nonbreaking anchor toc insertdatetime advlist lists wordcount imagetools textpattern noneditable help charmap emoticons",menubar:"file edit view insert format tools table help",toolbar:"undo redo | bold italic underline strikethrough | fontselect fontsizeselect formatselect | alignleft aligncenter alignright alignjustify | outdent indent |  numlist bullist | forecolor backcolor removeformat | pagebreak | charmap emoticons | fullscreen  preview save print | insertfile image media template link anchor codesample | ltr rtl",toolbar_sticky:!1,image_advtab:!0,document_base_url:l.N.currentUrl+"assets/vendor/tinymce",relative_url:!0,skin_url:l.N.currentUrl+"assets/vendor/tinymce/skins/ui/oxide",external_filemanager_path:"filemanager/",filemanager_title:"Filemanager",theme_url:l.N.currentUrl+"assets/vendor/tinymce/themes/silver/theme.js",external_plugins:{filemanager:l.N.currentUrl+"assets/vendor/filemanager/plugin.min.js"},content_css:["//fonts.googleapis.com/css?family=Lato:300,300i,400,400i","//www.tiny.cloud/css/codepen.min.css"],extended_valid_elements:"span[*]",importcss_append:!1},300)}ngOnDestroy(){tinymce.remove()}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(Z.e),t.Y36(h.o),t.Y36(c.qu),t.Y36(_.c))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-add-ticket"]],decls:63,vars:23,consts:[[1,"admin-content"],[1,"bg-dark"],[1,"container","m-b-30"],[1,"row"],[1,"col-12","text-white","p-t-40","p-b-90"],[1,""],[1,"opacity-75"],[1,"container","pull-up"],[1,"col-lg-12"],[1,"card","m-b-30"],[1,"card-header"],[1,"m-b-0"],[1,"card-body"],["autocomplete","off",3,"formGroup","ngSubmit"],["f","ngForm"],[1,"form-row"],[1,"col-md-6","form-group"],["formControlName","eventId",1,"form-control",3,"ngClass","change"],["value","","selected","","disabled",""],[3,"value",4,"ngFor","ngForOf"],["formControlName","member",1,"form-control",3,"ngClass"],[1,"col-md-12","form-group"],["class","col-2 form-group",4,"ngFor","ngForOf"],[1,"col-6"],[1,"form-control"],[1,"col-12"],["type","submit",1,"btn","btn-primary",3,"disabled"],[3,"value"],[1,"col-2","form-group"],["type","button",1,"btn","btn-danger",3,"click"],[1,"fa","fa-minus"],["type","button",1,"btn","btn-clear"],["type","button",1,"btn","btn-primary",3,"click"],[1,"fa","fa-plus"]],template:function(e,i){if(1&e){const o=t.EpF();t.TgZ(0,"section",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"div",3),t.TgZ(4,"div",4),t.TgZ(5,"h4",5),t._uU(6,"Add Ticket"),t.qZA(),t._UZ(7,"p",6),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(8,"div",7),t.TgZ(9,"div",3),t.TgZ(10,"div",8),t.TgZ(11,"div",9),t.TgZ(12,"div",10),t.TgZ(13,"h5",11),t._uU(14," Add Ticket "),t.qZA(),t.qZA(),t.TgZ(15,"div",12),t.TgZ(16,"form",13,14),t.NdJ("ngSubmit",function(){t.CHM(o);const g=t.MAs(17);return i.submitForm(g)}),t.TgZ(18,"div",15),t.TgZ(19,"div",16),t.TgZ(20,"label"),t._uU(21,"Events"),t.qZA(),t.TgZ(22,"select",17),t.NdJ("change",function(g){return i.getEventData(g)}),t.TgZ(23,"option",18),t._uU(24,"Select Event"),t.qZA(),t.YNc(25,O,2,2,"option",19),t.qZA(),t.qZA(),t.TgZ(26,"div",16),t.TgZ(27,"label"),t._uU(28,"Select Member"),t.qZA(),t.TgZ(29,"select",20),t.TgZ(30,"option",18),t._uU(31,"Select Member"),t.qZA(),t.YNc(32,C,2,3,"option",19),t.qZA(),t.qZA(),t.TgZ(33,"div",21),t.TgZ(34,"div",3),t.YNc(35,x,14,7,"div",22),t.TgZ(36,"div",23),t.TgZ(37,"label"),t._uU(38,"Payment Mode"),t.qZA(),t.TgZ(39,"select",24),t.TgZ(40,"option"),t._uU(41,"Cash"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(42,"div",3),t.TgZ(43,"div",25),t.TgZ(44,"p"),t.TgZ(45,"b"),t._uU(46,"SubTotal Price "),t.qZA(),t._uU(47),t.ALo(48,"currency"),t.qZA(),t.qZA(),t.TgZ(49,"div",25),t.TgZ(50,"p"),t.TgZ(51,"b"),t._uU(52,"Tax "),t.qZA(),t._uU(53),t.ALo(54,"currency"),t.qZA(),t.qZA(),t.TgZ(55,"div",25),t.TgZ(56,"p"),t.TgZ(57,"b"),t._uU(58,"Total Price"),t.qZA(),t._uU(59),t.ALo(60,"currency"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(61,"button",26),t._uU(62,"Add"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()}2&e&&(t.xp6(16),t.Q6J("formGroup",i.createTicketForm),t.xp6(6),t.Q6J("ngClass",t.VKq(19,U,"INVALID"==i.createTicketForm.controls.eventId.status&&i.createTicketForm.controls.eventId.touched)),t.xp6(3),t.Q6J("ngForOf",i.eventList),t.xp6(4),t.Q6J("ngClass",t.VKq(21,U,"INVALID"==i.createTicketForm.controls.member.status&&i.createTicketForm.controls.member.touched)),t.xp6(3),t.Q6J("ngForOf",i.allMemberList),t.xp6(3),t.Q6J("ngForOf",i.eventTickets),t.xp6(12),t.hij(": ",t.xi3(48,10,i.subTotalPrice,"USD"),""),t.xp6(6),t.hij(": ",t.xi3(54,13,i.taxPrice,"USD"),""),t.xp6(6),t.hij(" : ",t.xi3(60,16,i.totalPrice,"USD"),""),t.xp6(2),t.Q6J("disabled",!i.totalPrice))},directives:[c._Y,c.JL,c.sg,c.EJ,c.JJ,c.u,u.mk,c.YN,c.Kr,u.sg],pipes:[u.H9],styles:["span.avatar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{padding:5px;border:4px solid #c1c4cd}"]}),r})();var v=d(4292),D=d(7288),q=d(8002),S=d(1841);let f=(()=>{class r{constructor(e){this.http=e}getAllOrderList(){return this.http.get(`${l.N.apiUrl}/marketPlaceCarts/getAllOrders`).pipe((0,q.U)(e=>e))}getAllTicketPurchased(){return this.http.get(`${l.N.apiUrl}/orders/getAllSoldTickets`).pipe((0,q.U)(e=>e))}getOrderDetails(e){return this.http.post(`${l.N.apiUrl}/marketPlaceCarts/getOrderDetails`,{orderId:parseInt(e)}).pipe((0,q.U)(i=>i))}updateOrderDetails(e){return this.http.post(`${l.N.apiUrl}/marketPlaceCarts/updateOrder/${e.id}`,e).pipe((0,q.U)(i=>i))}}return r.\u0275fac=function(e){return new(e||r)(t.LFG(S.eN))},r.\u0275prov=t.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();var k=d(5938);function M(r,n){if(1&r&&(t.TgZ(0,"table",26),t.TgZ(1,"tbody"),t.TgZ(2,"tr"),t.TgZ(3,"td"),t._uU(4,"Order Date"),t.qZA(),t.TgZ(5,"td"),t._uU(6,":"),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.qZA(),t.TgZ(9,"tr"),t.TgZ(10,"td"),t._uU(11,"Customer Name"),t.qZA(),t.TgZ(12,"td"),t._uU(13,":"),t.qZA(),t.TgZ(14,"td"),t._uU(15),t.qZA(),t.qZA(),t.TgZ(16,"tr"),t.TgZ(17,"td"),t._uU(18,"Customer Email"),t.qZA(),t.TgZ(19,"td"),t._uU(20,":"),t.qZA(),t.TgZ(21,"td"),t._uU(22),t.qZA(),t.qZA(),t.TgZ(23,"tr"),t.TgZ(24,"td"),t._uU(25,"Phone#"),t.qZA(),t.TgZ(26,"td"),t._uU(27,":"),t.qZA(),t.TgZ(28,"td"),t._uU(29),t.qZA(),t.qZA(),t.TgZ(30,"tr"),t.TgZ(31,"td"),t._uU(32,"State"),t.qZA(),t.TgZ(33,"td"),t._uU(34,":"),t.qZA(),t.TgZ(35,"td"),t._uU(36),t.qZA(),t.qZA(),t.TgZ(37,"tr"),t.TgZ(38,"td"),t._uU(39,"City"),t.qZA(),t.TgZ(40,"td"),t._uU(41,":"),t.qZA(),t.TgZ(42,"td"),t._uU(43),t.qZA(),t.qZA(),t.TgZ(44,"tr"),t.TgZ(45,"td"),t._uU(46,"Postal Code"),t.qZA(),t.TgZ(47,"td"),t._uU(48,":"),t.qZA(),t.TgZ(49,"td"),t._uU(50),t.qZA(),t.qZA(),t._UZ(51,"tr"),t.qZA(),t.qZA()),2&r){const e=t.oxw(2);t.xp6(8),t.Oqu(e.orderDetails.orderDate),t.xp6(7),t.Oqu(e.orderDetails.user),t.xp6(7),t.Oqu(null==e.orderDetails.userDetails?null:e.orderDetails.userDetails.email),t.xp6(7),t.Oqu(null==e.orderDetails.userDetails?null:e.orderDetails.userDetails.mobile),t.xp6(7),t.Oqu(null==e.orderDetails.userDetails||null==e.orderDetails.userDetails.state?null:e.orderDetails.userDetails.state.name),t.xp6(7),t.Oqu(null==e.orderDetails.userDetails||null==e.orderDetails.userDetails.city?null:e.orderDetails.userDetails.city.name),t.xp6(7),t.Oqu(null==e.orderDetails.userDetails?null:e.orderDetails.userDetails.zip)}}function I(r,n){if(1&r&&(t.TgZ(0,"option",24),t._uU(1),t.qZA()),2&r){const e=n.$implicit;t.Q6J("ngValue",e.key),t.xp6(1),t.Oqu(e.value)}}const L=function(){return["/om/viw-orders"]},P=function(){return{standalone:!0}};function F(r,n){if(1&r){const e=t.EpF();t.TgZ(0,"tr"),t.TgZ(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t.TgZ(4,"a",27),t._UZ(5,"img",28),t.qZA(),t.qZA(),t.TgZ(6,"td"),t._uU(7),t.qZA(),t.TgZ(8,"td"),t._uU(9),t.qZA(),t.TgZ(10,"td"),t._uU(11),t.qZA(),t.TgZ(12,"td"),t._uU(13),t.qZA(),t.TgZ(14,"td"),t._uU(15),t.qZA(),t.TgZ(16,"td"),t.TgZ(17,"div",29),t._UZ(18,"input",30),t._UZ(19,"input",31),t.TgZ(20,"select",32),t.NdJ("ngModelChange",function(o){return t.CHM(e).$implicit.orderStatus=o})("ngModelChange",function(){const s=t.CHM(e).$implicit;return t.oxw(2).updateOrderStatus(s.orderStatus,s._id)}),t.YNc(21,I,2,2,"option",33),t.qZA(),t.TgZ(22,"div",34),t.TgZ(23,"span",35),t._uU(24,"Loading..."),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&r){const e=n.$implicit,i=n.index,o=t.oxw(2);t.xp6(2),t.Oqu(i+1),t.xp6(2),t.Q6J("routerLink",t.DdM(11,L)),t.xp6(1),t.s9C("src",o.productImageBaseUrl+e.images[0],t.LSH),t.xp6(2),t.Oqu(e.productTitle+", "+e.productModel),t.xp6(2),t.Oqu(e.size[0].name),t.xp6(2),t.Oqu(e.colors[0].name),t.xp6(2),t.Oqu(e.quantity),t.xp6(2),t.hij("$",e.price,""),t.xp6(5),t.Q6J("ngModel",e.orderStatus)("ngModelOptions",t.DdM(12,P)),t.xp6(1),t.Q6J("ngForOf",o.orderStatusList)}}function E(r,n){if(1&r){const e=t.EpF();t.TgZ(0,"div",16),t.TgZ(1,"div",17),t.YNc(2,M,52,7,"table",18),t.TgZ(3,"table",19),t.TgZ(4,"thead"),t.TgZ(5,"tr"),t.TgZ(6,"th",20),t._uU(7,"#"),t.qZA(),t.TgZ(8,"th"),t._uU(9,"Product Image"),t.qZA(),t.TgZ(10,"th"),t._uU(11,"Product Name"),t.qZA(),t.TgZ(12,"th"),t._uU(13,"Size "),t.qZA(),t.TgZ(14,"th"),t._uU(15,"Color "),t.qZA(),t.TgZ(16,"th"),t._uU(17,"Qty"),t.qZA(),t.TgZ(18,"th"),t._uU(19,"Price"),t.qZA(),t.TgZ(20,"th"),t._uU(21,"Status"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(22,"tbody"),t.YNc(23,F,25,13,"tr",21),t.qZA(),t.qZA(),t.TgZ(24,"table",19),t.TgZ(25,"tbody"),t.TgZ(26,"tr"),t.TgZ(27,"td"),t._uU(28,"Sub Total"),t.qZA(),t.TgZ(29,"td"),t._uU(30,":"),t.qZA(),t.TgZ(31,"td"),t._uU(32),t.qZA(),t.qZA(),t.TgZ(33,"tr"),t.TgZ(34,"td"),t._uU(35,"Shipping"),t.qZA(),t.TgZ(36,"td"),t._uU(37,":"),t.qZA(),t.TgZ(38,"td"),t._uU(39),t.qZA(),t.qZA(),t.TgZ(40,"tr"),t.TgZ(41,"td"),t._uU(42,"Tax"),t.qZA(),t.TgZ(43,"td"),t._uU(44,":"),t.qZA(),t.TgZ(45,"td"),t._uU(46),t.qZA(),t.qZA(),t.TgZ(47,"tr"),t.TgZ(48,"td"),t._uU(49,"Coupon Code"),t.qZA(),t.TgZ(50,"td"),t._uU(51,":"),t.qZA(),t.TgZ(52,"td"),t._uU(53),t.qZA(),t.qZA(),t.TgZ(54,"tr"),t.TgZ(55,"td"),t._uU(56,"Discount"),t.qZA(),t.TgZ(57,"td"),t._uU(58,":"),t.qZA(),t.TgZ(59,"td"),t._uU(60),t.qZA(),t.qZA(),t.TgZ(61,"tr"),t.TgZ(62,"td"),t._uU(63,"Total Amount"),t.qZA(),t.TgZ(64,"td"),t._uU(65,":"),t.qZA(),t.TgZ(66,"td"),t._uU(67),t.qZA(),t.qZA(),t.TgZ(68,"tr"),t.TgZ(69,"td"),t._uU(70,"Payment Method"),t.qZA(),t.TgZ(71,"td"),t._uU(72,":"),t.qZA(),t.TgZ(73,"td"),t._uU(74),t.qZA(),t.qZA(),t.TgZ(75,"tr"),t.TgZ(76,"td"),t._uU(77,"Payment Status"),t.qZA(),t.TgZ(78,"td"),t._uU(79,":"),t.qZA(),t.TgZ(80,"td"),t.TgZ(81,"select",22),t.NdJ("ngModelChange",function(o){return t.CHM(e),t.oxw().orderDetails.paymentStatus=o}),t.TgZ(82,"option",23),t._uU(83,"Unpaid"),t.qZA(),t.TgZ(84,"option",24),t._uU(85,"Paid"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(86,"tr"),t.TgZ(87,"td",25),t._uU(88,"Delivery Instruction"),t.qZA(),t.TgZ(89,"td",25),t._uU(90,":"),t.qZA(),t.TgZ(91,"td",25),t._uU(92),t.qZA(),t.qZA(),t._UZ(93,"tr"),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&r){const e=t.oxw();t.xp6(2),t.Q6J("ngIf",e.orderDetails),t.xp6(21),t.Q6J("ngForOf",e.orderDetails.products),t.xp6(9),t.hij("$",e.orderDetails.price,""),t.xp6(7),t.hij("$",e.orderDetails.shippingPrice,""),t.xp6(7),t.hij("$",e.orderDetails.tax,""),t.xp6(7),t.Oqu(e.orderDetails.couponCode),t.xp6(7),t.hij("$",e.orderDetails.discount,""),t.xp6(7),t.hij("$",e.orderDetails.price+e.orderDetails.shippingPrice+e.orderDetails.tax-e.orderDetails.discount,""),t.xp6(7),t.Oqu(e.orderDetails.paymentMethod),t.xp6(7),t.Q6J("ngModel",e.orderDetails.paymentStatus),t.xp6(1),t.Q6J("ngValue",!1),t.xp6(2),t.Q6J("ngValue",!0),t.xp6(8),t.Oqu(e.orderDetails.deliveryInstruction)}}const w=function(){return["/om/view-orders"]};let N=(()=>{class r{constructor(e,i,o,s,g){this.omSrvc=e,this.activeRoute=i,this.fb=o,this.alertSrvc=s,this.dialog=g,this.productImageBaseUrl=l.N.baseUrl+"/uploads/products/",this.orderStatusList=v.$.orderStatus}ngOnInit(){this.orderId=this.activeRoute.snapshot.params.orderId,this.getOrderDetails(this.orderId)}getOrderDetails(e){this.omSrvc.getOrderDetails(e).subscribe(i=>{i.error||(this.orderDetails=i.data)})}updateOrderStatus(e,i){this.dialog.open(D.a,{width:"400px",disableClose:!0,data:{message:"Are you sure to update status?"}}).afterClosed().subscribe(s=>{s&&this.omSrvc.updateOrderDetails({id:i,orderStatus:e}).subscribe(m=>{this.alertSrvc.success(m.message)})})}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(f),t.Y36(a.gz),t.Y36(c.qu),t.Y36(_.c),t.Y36(k.uw))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-edit-order"]],decls:20,vars:3,consts:[[1,"admin-content"],[1,"bg-dark"],[1,"container","m-b-30"],[1,"row"],[1,"col-6","text-white","p-t-40","p-b-90"],[1,""],[1,"opacity-75"],["routerLinkActive","router-link-active",1,"btn","m-b-30","ml-2","mr-2","btn-success","float-right",3,"routerLink"],[1,"mdi","mdi-left-arrow"],[1,"container","pull-up"],[1,"row",2,"margin","0 auto","width","100%","align-items","center","justify-content","center"],[1,"col-lg-12"],[1,"card","m-b-30"],[1,"card-header"],[1,"m-b-0"],["class","card-body",4,"ngIf"],[1,"card-body"],[1,"table-responsive"],["id","members","class","table","style","",4,"ngIf"],["id","members",1,"table",2,"width","100%"],[1,"nosort"],[4,"ngFor","ngForOf"],["name","pstatus","disabled","",3,"ngModel","ngModelChange"],["selected","",3,"ngValue"],[3,"ngValue"],["valign","top"],["id","members",1,"table"],["routerLinkActive","router-link-active",3,"routerLink"],["height","65","width","auto",3,"src"],[1,"status-toggle"],["type","hidden","value","56",1,"id"],["type","hidden","value","31",1,"oid"],["name","booking_status",1,"form-control","booking_status",3,"ngModel","ngModelOptions","ngModelChange"],[3,"ngValue",4,"ngFor","ngForOf"],["role","status",1,"spinner-border","spinner-border-sm","spinner",2,"display","none"],[1,"sr-only"]],template:function(e,i){1&e&&(t.TgZ(0,"section",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"div",3),t.TgZ(4,"div",4),t.TgZ(5,"h4",5),t._uU(6,"Manage Orders"),t.qZA(),t._UZ(7,"p",6),t.qZA(),t.TgZ(8,"div",4),t.TgZ(9,"a",7),t._UZ(10,"i",8),t._uU(11," Back to Listing "),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(12,"div",9),t.TgZ(13,"div",10),t.TgZ(14,"div",11),t.TgZ(15,"div",12),t.TgZ(16,"div",13),t.TgZ(17,"h5",14),t._uU(18," View Order Details "),t.qZA(),t.qZA(),t.YNc(19,E,94,13,"div",15),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(9),t.Q6J("routerLink",t.DdM(2,w)),t.xp6(10),t.Q6J("ngIf",i.orderDetails))},directives:[a.yS,a.Od,u.O5,u.sg,c.EJ,c.JJ,c.On,c.YN,c.Kr],styles:[""]}),r})();const J=function(r){return["/om/edit-order",r]};function Y(r,n){if(1&r&&(t.TgZ(0,"tr"),t.TgZ(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.ALo(5,"date"),t.qZA(),t.TgZ(6,"td"),t._uU(7),t.qZA(),t.TgZ(8,"td"),t._uU(9),t.qZA(),t.TgZ(10,"td"),t._uU(11),t.qZA(),t.TgZ(12,"td"),t._uU(13),t.qZA(),t.TgZ(14,"td"),t._uU(15),t.qZA(),t.TgZ(16,"td"),t.TgZ(17,"a",14),t._uU(18," View/Edit"),t.qZA(),t.qZA(),t.qZA()),2&r){const e=n.$implicit;t.xp6(2),t.Oqu(e.orderId),t.xp6(2),t.Oqu(t.xi3(5,8,e.updatedAt,"medium")),t.xp6(3),t.hij(" ",e.user," "),t.xp6(2),t.Oqu(e.price),t.xp6(2),t.Oqu(e.paymentStatus),t.xp6(2),t.Oqu(e.paymentMethod),t.xp6(2),t.Oqu(e.orderStatus),t.xp6(2),t.Q6J("routerLink",t.VKq(11,J,e.orderId))}}function V(r,n){if(1&r&&(t.TgZ(0,"tr"),t.TgZ(1,"td"),t.TgZ(2,"span",16),t._UZ(3,"img",17),t.qZA(),t.qZA(),t.TgZ(4,"td"),t._uU(5),t.qZA(),t.TgZ(6,"td"),t._uU(7),t.qZA(),t.TgZ(8,"td"),t._uU(9),t.qZA(),t.TgZ(10,"td"),t._uU(11),t.ALo(12,"currency"),t.qZA(),t.TgZ(13,"td"),t._uU(14),t.qZA(),t.TgZ(15,"td"),t._uU(16),t.qZA(),t.TgZ(17,"td"),t.TgZ(18,"a",18),t._uU(19," View/Edit"),t.qZA(),t.TgZ(20,"a",18),t._uU(21," Delete"),t.qZA(),t.qZA(),t.qZA()),2&r){const e=n.$implicit,i=t.oxw();t.xp6(3),t.Q6J("src",i.badgeImageBaseUrl+e._id+".png",t.LSH),t.xp6(2),t.Oqu(e.orderId?e.orderId:""),t.xp6(2),t.hij(" ",e.eventData?e.eventData.name:""," "),t.xp6(2),t.Oqu(e.ticketTypeId),t.xp6(2),t.Oqu(t.xi3(12,7,e.totalPrice,"USD")),t.xp6(3),t.Oqu(e.userData?e.userData.firstName+" "+e.userData.lastName:""),t.xp6(2),t.Oqu(e.status)}}const j=function(){return["/om/add-ticket"]},B=[{path:"view-orders",canActivate:[T.a],component:(()=>{class r{constructor(e,i,o){this.omSrvc=e,this.alertSrvc=i,this.dialog=o,this.allOrderList=[],this.statusList=v.$.cartStatus,this.badgeImageBaseUrl=l.N.baseUrl+"/uploads/products/"}ngOnInit(){this.getAllOrders()}getAllOrders(){this.omSrvc.getAllOrderList().subscribe(e=>{e.error||(this.allOrderList=e.data,this.initiateDataTable())})}initiateDataTable(){setTimeout(()=>{$("#member").DataTable({aaSorting:[]})},200)}getStatus(e){return this.statusList.filter(i=>i.key==e)[0]}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(f),t.Y36(_.c),t.Y36(k.uw))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-view-orders"]],decls:35,vars:1,consts:[[1,"admin-content"],[1,"bg-dark"],[1,"container","m-b-30"],[1,"row"],[1,"col-12","text-white","p-t-40","p-b-90"],[1,""],[1,"opacity-75"],[1,"container","pull-up"],[1,"col-12"],[1,"card"],[1,"card-body"],[1,"table-responsive","p-t-10"],["id","member",1,"table",2,"width","100%"],[4,"ngFor","ngForOf"],["routerLinkActive","router-link-active",2,"font-size","14px","padding","5px",3,"routerLink"]],template:function(e,i){1&e&&(t.TgZ(0,"section",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"div",3),t.TgZ(4,"div",4),t.TgZ(5,"h4",5),t._uU(6,"View Orders"),t.qZA(),t._UZ(7,"p",6),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(8,"div",7),t.TgZ(9,"div",3),t.TgZ(10,"div",8),t.TgZ(11,"div",9),t.TgZ(12,"div",10),t.TgZ(13,"div",11),t.TgZ(14,"table",12),t.TgZ(15,"thead"),t.TgZ(16,"tr"),t.TgZ(17,"th"),t._uU(18,"ORDER#"),t.qZA(),t.TgZ(19,"th"),t._uU(20,"DATE"),t.qZA(),t.TgZ(21,"th"),t._uU(22,"NAME"),t.qZA(),t.TgZ(23,"th"),t._uU(24,"TOTAL"),t.qZA(),t.TgZ(25,"th"),t._uU(26,"PAYMENT"),t.qZA(),t.TgZ(27,"th"),t._uU(28,"PAID BY"),t.qZA(),t.TgZ(29,"th"),t._uU(30,"ORDER"),t.qZA(),t.TgZ(31,"th"),t._uU(32,"ACTION"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(33,"tbody"),t.YNc(34,Y,19,13,"tr",13),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(34),t.Q6J("ngForOf",i.allOrderList))},directives:[u.sg,a.yS,a.Od],pipes:[u.uU],styles:[".Cancelled.status[_ngcontent-%COMP%]{color:red}.Ongoing.status[_ngcontent-%COMP%]{color:#00e08b}.Past.status[_ngcontent-%COMP%]{color:gray}td.sorting_1[_ngcontent-%COMP%]{background-color:transparent}td[_ngcontent-%COMP%]{vertical-align:middle}"]}),r})()},{path:"view-tickets",canActivate:[T.a],component:(()=>{class r{constructor(e,i,o){this.omSrvc=e,this.alertSrvc=i,this.dialog=o,this.allOrderList=[],this.statusList=v.$.cartStatus,this.badgeImageBaseUrl=l.N.baseUrl+"/uploads/tickets/"}ngOnInit(){this.getAllOrders()}getAllOrders(){this.omSrvc.getAllTicketPurchased().subscribe(e=>{e.error||(this.allOrderList=e.data,console.log(this.allOrderList),this.initiateDataTable())})}initiateDataTable(){setTimeout(()=>{$("#member").DataTable({aaSorting:[]})},200)}getStatus(e){return this.statusList.filter(i=>i.key==e)[0]}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(f),t.Y36(_.c),t.Y36(k.uw))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-view-tickets"]],decls:38,vars:3,consts:[[1,"admin-content"],[1,"bg-dark"],[1,"container","m-b-30"],[1,"row"],[1,"col-6","text-white","p-t-40","p-b-90"],[1,""],[1,"opacity-75"],["routerLinkActive","router-link-active",1,"btn","m-b-30","ml-2","mr-2","btn-success","float-right",3,"routerLink"],[1,"mdi","mdi-plus"],[1,"container","pull-up"],[1,"col-12"],[1,"card"],[1,"card-body"],[1,"table-responsive","p-t-10"],["id","member",1,"table",2,"width","100%"],[4,"ngFor","ngForOf"],[1,"avatar","avatar-l"],["alt","...",1,"avatar-img",3,"src"],[2,"font-size","14px","padding","5px"]],template:function(e,i){1&e&&(t.TgZ(0,"section",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"div",3),t.TgZ(4,"div",4),t.TgZ(5,"h4",5),t._uU(6,"View Tickets"),t.qZA(),t._UZ(7,"p",6),t.qZA(),t.TgZ(8,"div",4),t.TgZ(9,"a",7),t._UZ(10,"i",8),t._uU(11," Add Ticket/Order "),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(12,"div",9),t.TgZ(13,"div",3),t.TgZ(14,"div",10),t.TgZ(15,"div",11),t.TgZ(16,"div",12),t.TgZ(17,"div",13),t.TgZ(18,"table",14),t.TgZ(19,"thead"),t.TgZ(20,"tr"),t._UZ(21,"th"),t.TgZ(22,"th"),t._uU(23,"SL NO#"),t.qZA(),t.TgZ(24,"th"),t._uU(25,"EVENT NAME"),t.qZA(),t.TgZ(26,"th"),t._uU(27,"TICKET TYPE"),t.qZA(),t.TgZ(28,"th"),t._uU(29,"PRICE"),t.qZA(),t.TgZ(30,"th"),t._uU(31,"PURCHASED BY"),t.qZA(),t.TgZ(32,"th"),t._uU(33,"STATUS"),t.qZA(),t.TgZ(34,"th"),t._uU(35,"ACTION"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(36,"tbody"),t.YNc(37,V,22,10,"tr",15),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(9),t.Q6J("routerLink",t.DdM(2,j)),t.xp6(28),t.Q6J("ngForOf",i.allOrderList))},directives:[a.yS,a.Od,u.sg],pipes:[u.H9],styles:[".Cancelled.status[_ngcontent-%COMP%]{color:red}.Ongoing.status[_ngcontent-%COMP%]{color:#00e08b}.Past.status[_ngcontent-%COMP%]{color:gray}td.sorting_1[_ngcontent-%COMP%]{background-color:transparent}td[_ngcontent-%COMP%]{vertical-align:middle}"]}),r})()},{path:"add-ticket",canActivate:[T.a],component:y},{path:"edit-order/:orderId",canActivate:[T.a],component:N}];let z=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({imports:[[a.Bz.forChild(B)],a.Bz]}),r})(),H=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({imports:[[u.ez,z,c.u5,c.UX]]}),r})()}}]);