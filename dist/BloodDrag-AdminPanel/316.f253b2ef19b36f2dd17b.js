"use strict";(self.webpackChunkblood_drag_admin_panel=self.webpackChunkblood_drag_admin_panel||[]).push([[316],{5566:(O,A,d)=>{d.d(A,{a:()=>q});var a=d(7716),s=d(7179),T=d(5643);let q=(()=>{class Z{constructor(t,c){this.router=t,this.authService=c}canActivate(t,c){return!!this.authService.authValue||(this.router.navigate(["/login"],{queryParams:{returnUrl:c.url}}),!1)}}return Z.\u0275fac=function(t){return new(t||Z)(a.LFG(s.F0),a.LFG(T.e))},Z.\u0275prov=a.Yz7({token:Z,factory:Z.\u0275fac,providedIn:"root"}),Z})()},316:(O,A,d)=>{d.r(A),d.d(A,{OrderManagementModule:()=>w});var a=d(8583),s=d(7179),T=d(5566),q=d(4292),Z=d(7288),g=d(2340),t=d(7716),c=d(8002),_=d(1841);let m=(()=>{class r{constructor(e){this.http=e}getAllOrderList(){return this.http.get(`${g.N.apiUrl}/marketPlaceCarts/getAllOrders`).pipe((0,c.U)(e=>e))}getOrderDetails(e){return this.http.post(`${g.N.apiUrl}/marketPlaceCarts/getOrderDetails`,{orderId:parseInt(e)}).pipe((0,c.U)(o=>o))}updateOrderDetails(e){return this.http.post(`${g.N.apiUrl}/marketPlaceCarts/updateOrder/${e.id}`,e).pipe((0,c.U)(o=>o))}}return r.\u0275fac=function(e){return new(e||r)(t.LFG(_.eN))},r.\u0275prov=t.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();var l=d(3679),h=d(4853),U=d(5938);function v(r,i){if(1&r&&(t.TgZ(0,"table",26),t.TgZ(1,"tbody"),t.TgZ(2,"tr"),t.TgZ(3,"td"),t._uU(4,"Order Date"),t.qZA(),t.TgZ(5,"td"),t._uU(6,":"),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.qZA(),t.TgZ(9,"tr"),t.TgZ(10,"td"),t._uU(11,"Customer Name"),t.qZA(),t.TgZ(12,"td"),t._uU(13,":"),t.qZA(),t.TgZ(14,"td"),t._uU(15),t.qZA(),t.qZA(),t.TgZ(16,"tr"),t.TgZ(17,"td"),t._uU(18,"Customer Email"),t.qZA(),t.TgZ(19,"td"),t._uU(20,":"),t.qZA(),t.TgZ(21,"td"),t._uU(22),t.qZA(),t.qZA(),t.TgZ(23,"tr"),t.TgZ(24,"td"),t._uU(25,"Phone#"),t.qZA(),t.TgZ(26,"td"),t._uU(27,":"),t.qZA(),t.TgZ(28,"td"),t._uU(29),t.qZA(),t.qZA(),t.TgZ(30,"tr"),t.TgZ(31,"td"),t._uU(32,"State"),t.qZA(),t.TgZ(33,"td"),t._uU(34,":"),t.qZA(),t.TgZ(35,"td"),t._uU(36),t.qZA(),t.qZA(),t.TgZ(37,"tr"),t.TgZ(38,"td"),t._uU(39,"City"),t.qZA(),t.TgZ(40,"td"),t._uU(41,":"),t.qZA(),t.TgZ(42,"td"),t._uU(43),t.qZA(),t.qZA(),t.TgZ(44,"tr"),t.TgZ(45,"td"),t._uU(46,"Postal Code"),t.qZA(),t.TgZ(47,"td"),t._uU(48,":"),t.qZA(),t.TgZ(49,"td"),t._uU(50),t.qZA(),t.qZA(),t._UZ(51,"tr"),t.qZA(),t.qZA()),2&r){const e=t.oxw(2);t.xp6(8),t.Oqu(e.orderDetails.orderDate),t.xp6(7),t.Oqu(e.orderDetails.user),t.xp6(7),t.Oqu(null==e.orderDetails.userDetails?null:e.orderDetails.userDetails.email),t.xp6(7),t.Oqu(null==e.orderDetails.userDetails?null:e.orderDetails.userDetails.mobile),t.xp6(7),t.Oqu(null==e.orderDetails.userDetails||null==e.orderDetails.userDetails.state?null:e.orderDetails.userDetails.state.name),t.xp6(7),t.Oqu(null==e.orderDetails.userDetails||null==e.orderDetails.userDetails.city?null:e.orderDetails.userDetails.city.name),t.xp6(7),t.Oqu(null==e.orderDetails.userDetails?null:e.orderDetails.userDetails.zip)}}function D(r,i){if(1&r&&(t.TgZ(0,"option",24),t._uU(1),t.qZA()),2&r){const e=i.$implicit;t.Q6J("ngValue",e.key),t.xp6(1),t.Oqu(e.value)}}const f=function(){return["/om/viw-orders"]},x=function(){return{standalone:!0}};function C(r,i){if(1&r){const e=t.EpF();t.TgZ(0,"tr"),t.TgZ(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t.TgZ(4,"a",27),t._UZ(5,"img",28),t.qZA(),t.qZA(),t.TgZ(6,"td"),t._uU(7),t.qZA(),t.TgZ(8,"td"),t._uU(9),t.qZA(),t.TgZ(10,"td"),t._uU(11),t.qZA(),t.TgZ(12,"td"),t._uU(13),t.qZA(),t.TgZ(14,"td"),t._uU(15),t.qZA(),t.TgZ(16,"td"),t.TgZ(17,"div",29),t._UZ(18,"input",30),t._UZ(19,"input",31),t.TgZ(20,"select",32),t.NdJ("ngModelChange",function(n){return t.CHM(e).$implicit.orderStatus=n})("ngModelChange",function(){const u=t.CHM(e).$implicit;return t.oxw(2).updateOrderStatus(u.orderStatus,u._id)}),t.YNc(21,D,2,2,"option",33),t.qZA(),t.TgZ(22,"div",34),t.TgZ(23,"span",35),t._uU(24,"Loading..."),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&r){const e=i.$implicit,o=i.index,n=t.oxw(2);t.xp6(2),t.Oqu(o+1),t.xp6(2),t.Q6J("routerLink",t.DdM(11,f)),t.xp6(1),t.s9C("src",n.productImageBaseUrl+e.images[0],t.LSH),t.xp6(2),t.Oqu(e.productTitle+", "+e.productModel),t.xp6(2),t.Oqu(e.size[0].name),t.xp6(2),t.Oqu(e.colors[0].name),t.xp6(2),t.Oqu(e.quantity),t.xp6(2),t.hij("$",e.price,""),t.xp6(5),t.Q6J("ngModel",e.orderStatus)("ngModelOptions",t.DdM(12,x)),t.xp6(1),t.Q6J("ngForOf",n.orderStatusList)}}function M(r,i){if(1&r){const e=t.EpF();t.TgZ(0,"div",16),t.TgZ(1,"div",17),t.YNc(2,v,52,7,"table",18),t.TgZ(3,"table",19),t.TgZ(4,"thead"),t.TgZ(5,"tr"),t.TgZ(6,"th",20),t._uU(7,"#"),t.qZA(),t.TgZ(8,"th"),t._uU(9,"Product Image"),t.qZA(),t.TgZ(10,"th"),t._uU(11,"Product Name"),t.qZA(),t.TgZ(12,"th"),t._uU(13,"Size "),t.qZA(),t.TgZ(14,"th"),t._uU(15,"Color "),t.qZA(),t.TgZ(16,"th"),t._uU(17,"Qty"),t.qZA(),t.TgZ(18,"th"),t._uU(19,"Price"),t.qZA(),t.TgZ(20,"th"),t._uU(21,"Status"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(22,"tbody"),t.YNc(23,C,25,13,"tr",21),t.qZA(),t.qZA(),t.TgZ(24,"table",19),t.TgZ(25,"tbody"),t.TgZ(26,"tr"),t.TgZ(27,"td"),t._uU(28,"Sub Total"),t.qZA(),t.TgZ(29,"td"),t._uU(30,":"),t.qZA(),t.TgZ(31,"td"),t._uU(32),t.qZA(),t.qZA(),t.TgZ(33,"tr"),t.TgZ(34,"td"),t._uU(35,"Shipping"),t.qZA(),t.TgZ(36,"td"),t._uU(37,":"),t.qZA(),t.TgZ(38,"td"),t._uU(39),t.qZA(),t.qZA(),t.TgZ(40,"tr"),t.TgZ(41,"td"),t._uU(42,"Tax"),t.qZA(),t.TgZ(43,"td"),t._uU(44,":"),t.qZA(),t.TgZ(45,"td"),t._uU(46),t.qZA(),t.qZA(),t.TgZ(47,"tr"),t.TgZ(48,"td"),t._uU(49,"Coupon Code"),t.qZA(),t.TgZ(50,"td"),t._uU(51,":"),t.qZA(),t.TgZ(52,"td"),t._uU(53),t.qZA(),t.qZA(),t.TgZ(54,"tr"),t.TgZ(55,"td"),t._uU(56,"Discount"),t.qZA(),t.TgZ(57,"td"),t._uU(58,":"),t.qZA(),t.TgZ(59,"td"),t._uU(60),t.qZA(),t.qZA(),t.TgZ(61,"tr"),t.TgZ(62,"td"),t._uU(63,"Total Amount"),t.qZA(),t.TgZ(64,"td"),t._uU(65,":"),t.qZA(),t.TgZ(66,"td"),t._uU(67),t.qZA(),t.qZA(),t.TgZ(68,"tr"),t.TgZ(69,"td"),t._uU(70,"Payment Method"),t.qZA(),t.TgZ(71,"td"),t._uU(72,":"),t.qZA(),t.TgZ(73,"td"),t._uU(74),t.qZA(),t.qZA(),t.TgZ(75,"tr"),t.TgZ(76,"td"),t._uU(77,"Payment Status"),t.qZA(),t.TgZ(78,"td"),t._uU(79,":"),t.qZA(),t.TgZ(80,"td"),t.TgZ(81,"select",22),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().orderDetails.paymentStatus=n}),t.TgZ(82,"option",23),t._uU(83,"Unpaid"),t.qZA(),t.TgZ(84,"option",24),t._uU(85,"Paid"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(86,"tr"),t.TgZ(87,"td",25),t._uU(88,"Delivery Instruction"),t.qZA(),t.TgZ(89,"td",25),t._uU(90,":"),t.qZA(),t.TgZ(91,"td",25),t._uU(92),t.qZA(),t.qZA(),t._UZ(93,"tr"),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&r){const e=t.oxw();t.xp6(2),t.Q6J("ngIf",e.orderDetails),t.xp6(21),t.Q6J("ngForOf",e.orderDetails.products),t.xp6(9),t.hij("$",e.orderDetails.price,""),t.xp6(7),t.hij("$",e.orderDetails.shippingPrice,""),t.xp6(7),t.hij("$",e.orderDetails.tax,""),t.xp6(7),t.Oqu(e.orderDetails.couponCode),t.xp6(7),t.hij("$",e.orderDetails.discount,""),t.xp6(7),t.hij("$",e.orderDetails.price+e.orderDetails.shippingPrice+e.orderDetails.tax-e.orderDetails.discount,""),t.xp6(7),t.Oqu(e.orderDetails.paymentMethod),t.xp6(7),t.Q6J("ngModel",e.orderDetails.paymentStatus),t.xp6(1),t.Q6J("ngValue",!1),t.xp6(2),t.Q6J("ngValue",!0),t.xp6(8),t.Oqu(e.orderDetails.deliveryInstruction)}}const y=function(){return["/om/view-orders"]};let b=(()=>{class r{constructor(e,o,n,u,p){this.omSrvc=e,this.activeRoute=o,this.fb=n,this.alertSrvc=u,this.dialog=p,this.productImageBaseUrl=g.N.baseUrl+"/uploads/products/",this.orderStatusList=q.$.orderStatus}ngOnInit(){this.orderId=this.activeRoute.snapshot.params.orderId,this.getOrderDetails(this.orderId)}getOrderDetails(e){this.omSrvc.getOrderDetails(e).subscribe(o=>{o.error||(this.orderDetails=o.data)})}updateOrderStatus(e,o){this.dialog.open(Z.a,{width:"400px",disableClose:!0,data:{message:"Are you sure to update status?"}}).afterClosed().subscribe(u=>{u&&this.omSrvc.updateOrderDetails({id:o,orderStatus:e}).subscribe(F=>{this.alertSrvc.success(F.message)})})}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(m),t.Y36(s.gz),t.Y36(l.qu),t.Y36(h.c),t.Y36(U.uw))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-edit-order"]],decls:20,vars:3,consts:[[1,"admin-content"],[1,"bg-dark"],[1,"container","m-b-30"],[1,"row"],[1,"col-6","text-white","p-t-40","p-b-90"],[1,""],[1,"opacity-75"],["routerLinkActive","router-link-active",1,"btn","m-b-30","ml-2","mr-2","btn-success","float-right",3,"routerLink"],[1,"mdi","mdi-left-arrow"],[1,"container","pull-up"],[1,"row",2,"margin","0 auto","width","100%","align-items","center","justify-content","center"],[1,"col-lg-12"],[1,"card","m-b-30"],[1,"card-header"],[1,"m-b-0"],["class","card-body",4,"ngIf"],[1,"card-body"],[1,"table-responsive"],["id","members","class","table","style","",4,"ngIf"],["id","members",1,"table",2,"width","100%"],[1,"nosort"],[4,"ngFor","ngForOf"],["name","pstatus","disabled","",3,"ngModel","ngModelChange"],["selected","",3,"ngValue"],[3,"ngValue"],["valign","top"],["id","members",1,"table"],["routerLinkActive","router-link-active",3,"routerLink"],["height","65","width","auto",3,"src"],[1,"status-toggle"],["type","hidden","value","56",1,"id"],["type","hidden","value","31",1,"oid"],["name","booking_status",1,"form-control","booking_status",3,"ngModel","ngModelOptions","ngModelChange"],[3,"ngValue",4,"ngFor","ngForOf"],["role","status",1,"spinner-border","spinner-border-sm","spinner",2,"display","none"],[1,"sr-only"]],template:function(e,o){1&e&&(t.TgZ(0,"section",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"div",3),t.TgZ(4,"div",4),t.TgZ(5,"h4",5),t._uU(6,"Manage Orders"),t.qZA(),t._UZ(7,"p",6),t.qZA(),t.TgZ(8,"div",4),t.TgZ(9,"a",7),t._UZ(10,"i",8),t._uU(11," Back to Listing "),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(12,"div",9),t.TgZ(13,"div",10),t.TgZ(14,"div",11),t.TgZ(15,"div",12),t.TgZ(16,"div",13),t.TgZ(17,"h5",14),t._uU(18," View Order Details "),t.qZA(),t.qZA(),t.YNc(19,M,94,13,"div",15),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(9),t.Q6J("routerLink",t.DdM(2,y)),t.xp6(10),t.Q6J("ngIf",o.orderDetails))},directives:[s.yS,s.Od,a.O5,a.sg,l.EJ,l.JJ,l.On,l.YN,l.Kr],styles:[""]}),r})();const S=function(r){return["/om/edit-order",r]};function E(r,i){if(1&r&&(t.TgZ(0,"tr"),t.TgZ(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.ALo(5,"date"),t.qZA(),t.TgZ(6,"td"),t._uU(7),t.qZA(),t.TgZ(8,"td"),t._uU(9),t.qZA(),t.TgZ(10,"td"),t._uU(11),t.qZA(),t.TgZ(12,"td"),t._uU(13),t.qZA(),t.TgZ(14,"td"),t._uU(15),t.qZA(),t.TgZ(16,"td"),t.TgZ(17,"a",14),t._uU(18," View/Edit"),t.qZA(),t.qZA(),t.qZA()),2&r){const e=i.$implicit;t.xp6(2),t.Oqu(e.orderId),t.xp6(2),t.Oqu(t.xi3(5,8,e.updatedAt,"medium")),t.xp6(3),t.hij(" ",e.user," "),t.xp6(2),t.Oqu(e.price),t.xp6(2),t.Oqu(e.paymentStatus),t.xp6(2),t.Oqu(e.paymentMethod),t.xp6(2),t.Oqu(e.orderStatus),t.xp6(2),t.Q6J("routerLink",t.VKq(11,S,e.orderId))}}const P=[{path:"view-orders",canActivate:[T.a],component:(()=>{class r{constructor(e,o,n){this.omSrvc=e,this.alertSrvc=o,this.dialog=n,this.allOrderList=[],this.statusList=q.$.cartStatus,this.badgeImageBaseUrl=g.N.baseUrl+"/uploads/products/"}ngOnInit(){this.getAllOrders()}getAllOrders(){this.omSrvc.getAllOrderList().subscribe(e=>{e.error||(this.allOrderList=e.data,this.initiateDataTable())})}initiateDataTable(){setTimeout(()=>{$("#member").DataTable({aaSorting:[]})},200)}getStatus(e){return this.statusList.filter(o=>o.key==e)[0]}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(m),t.Y36(h.c),t.Y36(U.uw))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-view-orders"]],decls:35,vars:1,consts:[[1,"admin-content"],[1,"bg-dark"],[1,"container","m-b-30"],[1,"row"],[1,"col-12","text-white","p-t-40","p-b-90"],[1,""],[1,"opacity-75"],[1,"container","pull-up"],[1,"col-12"],[1,"card"],[1,"card-body"],[1,"table-responsive","p-t-10"],["id","member",1,"table",2,"width","100%"],[4,"ngFor","ngForOf"],["routerLinkActive","router-link-active",2,"font-size","14px","padding","5px",3,"routerLink"]],template:function(e,o){1&e&&(t.TgZ(0,"section",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"div",3),t.TgZ(4,"div",4),t.TgZ(5,"h4",5),t._uU(6,"View Orders"),t.qZA(),t._UZ(7,"p",6),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(8,"div",7),t.TgZ(9,"div",3),t.TgZ(10,"div",8),t.TgZ(11,"div",9),t.TgZ(12,"div",10),t.TgZ(13,"div",11),t.TgZ(14,"table",12),t.TgZ(15,"thead"),t.TgZ(16,"tr"),t.TgZ(17,"th"),t._uU(18,"ORDER#"),t.qZA(),t.TgZ(19,"th"),t._uU(20,"DATE"),t.qZA(),t.TgZ(21,"th"),t._uU(22,"NAME"),t.qZA(),t.TgZ(23,"th"),t._uU(24,"TOTAL"),t.qZA(),t.TgZ(25,"th"),t._uU(26,"PAYMENT"),t.qZA(),t.TgZ(27,"th"),t._uU(28,"PAID BY"),t.qZA(),t.TgZ(29,"th"),t._uU(30,"ORDER"),t.qZA(),t.TgZ(31,"th"),t._uU(32,"ACTION"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(33,"tbody"),t.YNc(34,E,19,13,"tr",13),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(34),t.Q6J("ngForOf",o.allOrderList))},directives:[a.sg,s.yS,s.Od],pipes:[a.uU],styles:[".Cancelled.status[_ngcontent-%COMP%]{color:red}.Ongoing.status[_ngcontent-%COMP%]{color:#00e08b}.Past.status[_ngcontent-%COMP%]{color:gray}td.sorting_1[_ngcontent-%COMP%]{background-color:transparent}td[_ngcontent-%COMP%]{vertical-align:middle}"]}),r})()},{path:"edit-order/:orderId",canActivate:[T.a],component:b}];let I=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({imports:[[s.Bz.forChild(P)],s.Bz]}),r})(),w=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({imports:[[a.ez,I,l.u5,l.UX]]}),r})()}}]);