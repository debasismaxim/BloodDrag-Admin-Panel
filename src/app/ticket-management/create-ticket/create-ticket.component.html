<section class="admin-content">
    <div class="bg-dark">

        <div class="container  m-b-30">

            <div class="row">

                <div class="col-12 text-white p-t-40 p-b-90">



                    <h4 class="">Create Ticket</h4>

                    <p class="opacity-75 "></p>





                </div>

            </div>

        </div>

    </div>
    <div class="container  pull-up">
        <div class="row">
            <div class="col-lg-12">


                <div class="card m-b-30">
                    <div class="card-header">
                        <h5 class="m-b-0">
                            Create Ticket
                        </h5>
                    </div>
                    <div class="card-body ">
                        <!--Following uses  .form-dark class on parent to make controls appear -->
                        <!--transparent in the container-->
                        <form [formGroup]="createTicketForm" #f="ngForm" autocomplete="off" (ngSubmit)="createTicket(f)">
                            <div class="form-row">
                                <div class="col-md-6 form-group">
                                    <label>Ticket Type</label>
                                    <select class="form-control" 
                                        [ngClass]="{'is-invalid': createTicketForm.controls['ticketTypeId'].status == 'INVALID' && createTicketForm.controls['ticketTypeId'].touched}"
                                        formControlName="ticketTypeId">
                                            <option value="" selected disabled>Select Ticket Type</option>
                                            <option *ngFor="let ticketType of ticketTypeList" [value]="ticketType.id">{{ticketType.name}}</option>
                                    </select>
                                    
                                </div>
                                <div class="col-md-6 form-group">
                                    <label>Event</label>
                                    <select class="form-control" 
                                        [ngClass]="{'is-invalid': createTicketForm.controls['eventId'].status == 'INVALID' && createTicketForm.controls['eventId'].touched}"
                                        formControlName="eventId" (ngModelChange)="setMaxDateTicket()">
                                            <option value="" selected disabled>Select Ticket Type</option>
                                            <option *ngFor="let event of eventList" [value]="event.id">{{event?.name}}</option>
                                    </select>
                                    
                                </div>
                            </div>

                            <div class="form-row">
                                <div class="form-group col-md-6">
                                    <label>Price</label>
                                    <input type="text" class="form-control" formControlName="price" 
                                    [ngClass]="{'is-invalid': createTicketForm.controls['price'].status == 'INVALID' && createTicketForm.controls['price'].touched}" [pattern]="onlyNumberRegex"
                                        placeholder="Price">
                                    <div class="invalid-feedback">
                                        Only digits are accepted.
                                    </div>
                                </div>
                                <div class="form-group col-md-6">
                                    <label>Total No. of Tickets</label>
                                    <input type="text" class="form-control" formControlName="totalNumberOfTickets"  [pattern]="onlyNumberRegex"
                                    [ngClass]="{'is-invalid': createTicketForm.controls['totalNumberOfTickets'].status == 'INVALID' && createTicketForm.controls['totalNumberOfTickets'].touched}"
                                        placeholder="Total No. of Tickets">
                                    <div class="invalid-feedback">
                                        Please input a number.
                                    </div>
                                </div>
                            </div>
                            <div class="form-row">
                                <div class="form-group col-md-6">
                                    <label class="d-block">Free Ticket for Participants</label>
                                    <mat-radio-group formControlName="participantFreeTicket">
                                        <mat-radio-button class="example-margin p-1" [checked]="createTicketForm.value.participantFreeTicket === true" [value]="true">Yes</mat-radio-button>
                                        <mat-radio-button class="example-margin p-1 ml-3l" [checked]="createTicketForm.value.participantFreeTicket === false" [value]="false"> No</mat-radio-button>
                                    </mat-radio-group>
                                    
                                </div>
                                <div class="form-group col-md-6">
                                    <label>No. of Free Tickets per Participant</label>
                                    <input type="text" class="form-control" formControlName="participantFreeTicketNumber"  [pattern]="onlyNumberRegex"
                                    [ngClass]="{'is-invalid': createTicketForm.controls['participantFreeTicketNumber'].status == 'INVALID' && createTicketForm.controls['participantFreeTicketNumber'].touched}"
                                        placeholder="Total No. of Tickets">
                                    <div class="invalid-feedback">
                                        Please input a number.
                                    </div>
                                </div>
                            </div>
                            <div class="form-row">
                                <div class="form-group col-md-12">
                                    <label>Short Description</label>
                                    <textarea formControlName="shortDescription" id="desc"
                                    [ngClass]="{'is-invalid': createTicketForm.controls['shortDescription'].status == 'INVALID' && createTicketForm.controls['shortDescription'].touched}">
                                    </textarea>
                                </div>
                            </div>
                            <div class="form-row">
                                
                                <div class="col-md-6 form-group">
                                    <label>Till Date</label>
                                    <input type="text" class="js-datepicker1 form-control" 
                                    [ngClass]="{'is-invalid': createTicketForm.controls['tillDate'].status == 'INVALID' && createTicketForm.controls['tillDate'].touched}"
                                    formControlName="tillDate"
                                        placeholder="Select Till Date" [(ngModel)]="tillDate">
                                </div>
                                <div class="col-md-6 form-group" *ngIf="createTicketForm.value.eventId" >
                                    <label class="mt-4 pt-2 pr-2">Event Starts: </label>
                                    <span style="color: blue">{{getSelectedEvent().startDate}}</span>
                                </div>
                            </div>

                                
                                


                            <button type="submit" class="btn btn-primary">Create Ticket</button>

                        </form>
                    </div>
                </div>
                <!--widget card ends-->


            </div>
        </div>


    </div>
</section>